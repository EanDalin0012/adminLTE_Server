<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.spring.adminlte.dao.ResourceFileInfoDao">

    <resultMap type="ResourceFileInfoDto"   id="mapper">
        <result property="id"               column="res_file_id" />
        <result property="fileTypeCode"     column="res_file_type_code" />
        <result property="fileName"         column="res_file_name" />
        <result property="fileExt"          column="res_file_ext" />
        <result property="fileContentType"  column="res_file_content_type" />
        <result property="fileSize"         column="res_file_size" />
        <result property="fileData"         column="res_file_data" />
        <result property="createdBy"        column="created_by" />
        <result property="createdDate"      column="created_date" />
        <result property="updatedBy"        column="updated_by" />
        <result property="updatedDate"      column="updated_date" />
    </resultMap>

    <select id="getLastId" resultType="Long">
		SELECT COUNT(res_file_id) FROM tb_resource_file_info
	</select>

    <insert id="addCompanyProfile" parameterType="ResourceFileInfoDTO">
		INSERT INTO tb_resource_file_info
		(
			res_file_id,
			res_file_type_code,
			res_file_name,
			res_file_ext,
			res_file_content_type,
			res_file_size,
			res_file_data,
			created_by,
			created_date

		)VALUES
		(
			#{id},
			#{fileTypeCode},
			#{fileName},
			#{fileExt},
			#{fileContentType},
			#{fileSize},
			#{fileData},
			#{createdBy},
			to_char(NOW(), 'YYYYMMDD')
		)

	</insert>
    <update id="updateCompanyProfile" parameterType="ResourceFileInfoDTO">
		UPDATE tb_resource_file_info SET
			res_file_type_code = #{fileTypeCode},
			res_file_name = #{fileName},
			res_file_ext = #{fileExt},
			res_file_content_type = #{fileContentType},
			res_file_size = #{fileSize},
			res_file_data = #{fileData},
			updated_by = #{updatedBy},
			updated_date = NOW()
		WHERE res_file_id = #{id}
	</update>
    <select id="getResourceById" parameterType="String" resultMap="mapper">
		SELECT * FROM tb_resource_file_info WHERE res_file_id = #{id} LIMIT 1
	</select>

	<delete id = "deleteById" parameterType = "String">
		DELETE from tb_resource_file_info WHERE res_file_id = #{resourceFileInfoId};
	</delete>

</mapper>